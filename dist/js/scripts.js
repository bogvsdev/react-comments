!function(){var e,t,n,a={},m=[],c=new McFly;localforage.setDriver([localforage.INDEXEDDB,localforage.LOCALSTORAGE]),e=setInterval(function(){localforage.getItem("comments").then(function(t){null!=t&&(t.forEach(function(e){null!=e&&(n.addComment(e,!1),m.push(e))}),clearInterval(e))})},100),t=c.createStore({getComments:function(){return m}},function(e){switch(e.actionType){case"ADD_COMMENT":a.addComment(e.commentData,e.state),t.emitChange()}}),n=c.createActions({addComment:function(e,t){return{actionType:"ADD_COMMENT",commentData:e,state:t}}}),a.addComment=function(e,t){m.push(e),t&&localforage.setItem("comments",m)},a.getComments=function(){return t.getComments()};var r=React.createClass({displayName:"CommentForm",saveComment:function(e){e.preventDefault();var t,m,c,r,l,o=!1;t=++a.getComments().length,m=React.findDOMNode(this.refs.name).value,c=React.findDOMNode(this.refs.email).value,r=React.findDOMNode(this.refs.text).value,o=m.length>0&&c.length>0&&r.length>0?!0:!1,o&&(l={id:t,author:m,email:c,text:r},n.addComment(l,!0),this.clearFields())},clearFields:function(){React.findDOMNode(this.refs.name).value="",React.findDOMNode(this.refs.email).value="",React.findDOMNode(this.refs.text).value=""},render:function(){return React.createElement("form",{id:"add-comment-form",onSubmit:this.saveComment},React.createElement("h3",null,"Share your opinion"),React.createElement("p",null,React.createElement("input",{className:"comment-input",type:"text",maxlength:"20",ref:"name",required:!0,placeholder:"Enter your name"}),React.createElement("input",{className:"comment-input",type:"email",ref:"email",required:!0,placeholder:"Enter your email"})),React.createElement("p",null,React.createElement("textarea",{id:"comment-area",ref:"text",required:!0,placeholder:"Enter your comment here"})),React.createElement("p",null,React.createElement("input",{id:"comment-btn",type:"submit",value:"Publish"})))}}),l=React.createClass({displayName:"Comments",mixins:[t.mixin],getInitialState:function(){return{comments:a.getComments()}},storeDidChange:function(){this.setState({cats:a.getComments()})},render:function(){var e,t=this.state.comments;return e=t.length>0?t.map(function(e){return React.createElement("div",{key:e.id,id:"com-"+e.id,className:"comment"},React.createElement("p",{"data-author":e.author,className:"comment-content"},e.text))}):React.createElement("h4",null,"There is no comments :("),React.createElement("div",null,e,React.createElement(r,null))}});React.render(React.createElement(l,null),document.querySelector(".comment-block"))}();
console.log("app is working...");